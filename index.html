<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="ã‚ãªãŸãŒãŠé¢¨å‘‚ã«å…¥ã‚‰ãªã„ç†ç”±ã¯ï¼Ÿ8ã‚¿ã‚¤ãƒ—ã‹ã‚‰è¨ºæ–­ï¼ #ãŠé¢¨å‘‚ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚¿ã‚¤ãƒ—è¨ºæ–­">
    <meta property="og:title" content="ãŠé¢¨å‘‚ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚¿ã‚¤ãƒ—è¨ºæ–­ï½œãƒ•ãƒ­ãƒã‚¤ãƒƒã‚¿ï¼Ÿ">
    <meta property="og:description" content="ã‚ãªãŸãŒãŠé¢¨å‘‚ã«å…¥ã‚‰ãªã„æœ¬å½“ã®ç†ç”±ã‚’è¨ºæ–­ã—ã¾ã™ã€‚">
    <meta property="og:image" content="https://diagnosis.bath-check.com/icon.png">
    <meta name="twitter:card" content="summary">
    <title>ãŠé¢¨å‘‚ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚¿ã‚¤ãƒ—è¨ºæ–­ï½œãƒ•ãƒ­ãƒã‚¤ãƒƒã‚¿ï¼Ÿ</title>

    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-5DPBJRNH');</script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Mochiy+Pop+One&family=Zen+Maru+Gothic:wght@500;700;900&display=swap"
        rel="stylesheet">
    <link rel="icon" href="https://diagnosis.bath-check.com/icon.png" type="image/png">
    <link rel="apple-touch-icon" href="https://diagnosis.bath-check.com/icon.png">

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "ãƒ•ãƒ­ãƒã‚¤ãƒƒã‚¿ï¼Ÿ",
        "alternateName": ["ãŠé¢¨å‘‚ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚¿ã‚¤ãƒ—è¨ºæ–­"],
        "url": "https://diagnosis.bath-check.com/"
    }
    </script>

    <style>
        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background: linear-gradient(135deg, #fdf2f8 0%, #ede9fe 50%, #dbeafe 100%);
            min-height: 100vh;
            -webkit-tap-highlight-color: transparent;
        }

        .font-pop {
            font-family: 'Mochiy Pop One', sans-serif;
        }

        .fade-in {
            animation: fadeIn 0.4s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .pb-safe {
            padding-bottom: env(safe-area-inset-bottom);
        }

        .progress-bar {
            transition: width 0.5s ease-out;
        }

        .option-btn {
            transition: all 0.2s ease;
        }

        .option-btn:active {
            transform: scale(0.97);
        }

        .component-bar {
            transition: width 1s ease-out;
        }
    </style>
</head>

<body class="text-gray-800 flex flex-col items-center p-4 pb-safe pt-20">

    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5DPBJRNH" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>

    <header
        class="fixed top-0 left-0 w-full bg-white/90 backdrop-blur-md z-50 flex justify-between items-center px-4 py-3 shadow-sm h-16">
        <h1
            class="text-lg md:text-xl font-black font-pop text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500 tracking-tight">
            <a href="index.html">ãƒ•ãƒ­ãƒã‚¤ãƒƒã‚¿ï¼Ÿ</a>
        </h1>
        <a href="https://app.bath-check.com/"
            class="bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold text-sm px-4 py-2 rounded-full shadow-md hover:shadow-lg transition">
            ã‚¢ãƒ—ãƒªã‚’é–‹ã
        </a>
    </header>

    <div id="app"
        class="bg-white/95 backdrop-blur-md rounded-3xl shadow-2xl w-full max-w-md overflow-hidden border-4 border-white relative flex flex-col mb-8">

        <!-- ãƒˆãƒƒãƒ—ç”»é¢ -->
        <div id="top-screen" class="p-6 text-center flex-col items-center justify-center fade-in flex py-10">
            <div class="mb-4">
                <span class="text-6xl">ğŸ›</span>
            </div>
            <h2 class="text-xl font-black font-pop mb-2 leading-tight">
                ãŠé¢¨å‘‚ã‚­ãƒ£ãƒ³ã‚»ãƒ«<br>
                <span
                    class="text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500 text-2xl">ã‚¿ã‚¤ãƒ—è¨ºæ–­</span>
            </h2>
            <p class="text-sm font-medium text-gray-600 mb-6 leading-relaxed">
                ã‚ãªãŸãŒãŠé¢¨å‘‚ã«å…¥ã‚‰ãªã„<br>æœ¬å½“ã®ç†ç”±ã‚’è¨ºæ–­ã—ã¾ã™
            </p>

            <div class="flex flex-wrap justify-center gap-2 mb-6 text-xs">
                <span class="bg-pink-100 text-pink-600 px-2 py-1 rounded-full">ğŸ“± ã‚¹ãƒãƒ›å»ƒäººå‹</span>
                <span class="bg-purple-100 text-purple-600 px-2 py-1 rounded-full">ğŸ¤ æ¨ã—å„ªå…ˆå‹</span>
                <span class="bg-orange-100 text-orange-600 px-2 py-1 rounded-full">ğŸ›ï¸ å¸ƒå›£ä¾å­˜å‹</span>
                <span class="bg-yellow-100 text-yellow-600 px-2 py-1 rounded-full">â° æ˜æ—¥ã‚„ã‚‹å‹</span>
            </div>

            <button onclick="startDiagnosis()"
                class="w-full py-4 bg-gradient-to-r from-pink-500 to-purple-500 text-white font-black rounded-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition text-lg relative overflow-hidden group">
                <span
                    class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></span>
                <span class="relative">è¨ºæ–­ã™ã‚‹ï¼ˆ6å•ï¼‰</span>
            </button>
            <p class="text-xs text-gray-400 mt-3">â€» ç´„30ç§’ã§å®Œäº†</p>

            <div class="flex justify-center gap-4 mt-4 text-xs">
                <a href="types.html" class="text-purple-500 underline font-bold">ã‚¿ã‚¤ãƒ—ä¸€è¦§</a>
                <a href="about.html" class="text-gray-500 underline">ã“ã®è¨ºæ–­ã«ã¤ã„ã¦</a>
            </div>
        </div>

        <!-- è³ªå•ç”»é¢ -->
        <div id="question-screen" class="hidden p-6 flex-col fade-in">
            <div id="progress-container" class="mb-6">
                <div class="flex justify-between text-xs font-bold text-gray-400 mb-1">
                    <span>QUESTION</span>
                    <span id="progress-text">1/6</span>
                </div>
                <div class="h-2 bg-gray-100 rounded-full overflow-hidden">
                    <div id="progress-bar" class="progress-bar h-full bg-gradient-to-r from-pink-400 to-purple-400"
                        style="width: 16.6%"></div>
                </div>
            </div>

            <div class="flex-grow flex flex-col justify-center min-h-[350px]">
                <h2 id="question-text" class="text-base font-black font-pop mb-6 text-center leading-relaxed"></h2>
                <div id="options-container" class="space-y-3 w-full"></div>
            </div>
        </div>

        <!-- çµæœç”»é¢ -->
        <div id="result-screen" class="hidden p-6 text-center flex-col items-center fade-in overflow-y-auto pb-safe">
            <div class="w-full max-w-sm mx-auto">

                <p class="text-xs font-black text-purple-400 mb-4 tracking-widest font-pop">ğŸ§ª è¨ºæ–­çµæœ</p>

                <!-- ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒ— -->
                <div
                    class="bg-gradient-to-br from-pink-50 to-purple-50 rounded-2xl p-5 mb-4 border-2 border-purple-100">
                    <span id="result-emoji" class="text-5xl mb-2 block"></span>
                    <p class="text-xs text-gray-500 mb-1">ã‚ãªãŸã¯</p>
                    <h3 id="result-type"
                        class="text-xl font-black font-pop text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500 mb-2">
                    </h3>
                    <p id="result-catch" class="text-sm text-gray-600 font-bold"></p>
                </div>

                <!-- æˆåˆ†è¡¨ç¤º -->
                <div class="bg-white rounded-2xl p-4 mb-4 border-2 border-gray-100 text-left">
                    <p class="text-xs font-black text-gray-400 mb-3 tracking-wider">ğŸ§¬ ã‚ãªãŸã®æˆåˆ†</p>
                    <div id="component-list" class="space-y-3"></div>
                </div>

                <!-- ç›¸æ€§ -->
                <div class="bg-white rounded-2xl p-4 mb-4 border-2 border-gray-100 text-left">
                    <div class="flex justify-between items-center text-sm">
                        <div>
                            <span class="text-gray-400">ğŸ’• ç›¸æ€§â—</span>
                            <span id="compatible-type" class="font-bold text-pink-500 ml-1"></span>
                        </div>
                        <div>
                            <span class="text-gray-400">âš”ï¸ å¤©æ•µ</span>
                            <span id="enemy-type" class="font-bold text-gray-600 ml-1"></span>
                        </div>
                    </div>
                </div>

                <!-- è¨€ã„è¨³ -->
                <div
                    class="bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-4 mb-5 border-2 border-yellow-200">
                    <p class="text-xs font-black text-yellow-600 mb-2 tracking-wider">ğŸ“œ ä»Šæ—¥ã®è¨€ã„è¨³</p>
                    <p id="excuse-text" class="text-sm font-bold text-gray-700 leading-relaxed"></p>
                </div>

                <!-- ãƒœã‚¿ãƒ³ -->
                <div class="space-y-3">
                    <a id="share-link" href="#" target="_blank"
                        class="block w-full py-3 bg-black text-white font-bold rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center gap-2">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z">
                            </path>
                        </svg>
                        çµæœã‚’ã‚·ã‚§ã‚¢
                    </a>

                    <button onclick="location.reload()"
                        class="w-full py-3 bg-gray-100 text-gray-600 font-bold rounded-full hover:bg-gray-200 transition">
                        ğŸ”„ ã‚‚ã†ä¸€åº¦è¨ºæ–­
                    </button>

                    <a href="https://app.bath-check.com/"
                        class="block w-full py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold rounded-full shadow-lg hover:shadow-xl transition flex items-center justify-center gap-2">
                        ğŸ“± ã‚¢ãƒ—ãƒªã§æ¯æ—¥ãƒã‚§ãƒƒã‚¯
                    </a>
                </div>
            </div>
        </div>

    </div>

    <script>
        // 8ã‚¿ã‚¤ãƒ—ã®å®šç¾©
        const types = {
            A: {
                id: 'A', emoji: 'ğŸ“±', name: 'ã‚¹ãƒãƒ›å»ƒäººå‹',
                catch: 'ã€Œæ°—ã¥ã„ãŸã‚‰2æ™‚é–“çµŒã£ã¦ãŸã€',
                compatible: 'C', enemy: 'æœã‚·ãƒ£ãƒ¯ãƒ¼å‹¢',
                excuses: [
                    'ã‚¹ãƒãƒ›ã®å……é›»ãŒå…ˆã€‚äººé–“ã®å……é›»ã¯å¾Œã§ã„ã„',
                    'TikTokè¦‹ã¦ãŸã‚‰æ™‚é–“ãŒæº¶ã‘ãŸã€‚ä»•æ–¹ãªã„',
                    'YouTubeã®è‡ªå‹•å†ç”ŸãŒæ‚ªã„ã€‚ç§ã¯æ‚ªããªã„'
                ]
            },
            B: {
                id: 'B', emoji: 'ğŸ¤', name: 'æ¨ã—å„ªå…ˆå‹',
                catch: 'ã€Œæ¨ã—ã®ãŸã‚ãªã‚‰ä½•æ—¥ã§ã‚‚ã€',
                compatible: 'A', enemy: 'ç¾å®Ÿä¸»ç¾©è€…',
                excuses: [
                    'æ¨ã—ã®é…ä¿¡ä¸­ã«é¢¨å‘‚ã¯å…¥ã‚Œãªã„ã€‚å¸¸è­˜',
                    'æ¨ã—ã«ä¼šã†æ—¥ã˜ã‚ƒãªã„ã‹ã‚‰å¤§ä¸ˆå¤«',
                    'æ¨ã—ã‚‚ä»Šé ƒãŠé¢¨å‘‚å…¥ã£ã¦ãªã„ã‹ã‚‚ã—ã‚Œãªã„'
                ]
            },
            C: {
                id: 'C', emoji: 'ğŸ›ï¸', name: 'å¸ƒå›£ä¾å­˜å‹',
                catch: 'ã€Œã‚ã¨5åˆ†ã€ã®ãƒ—ãƒ­',
                compatible: 'A', enemy: 'æ—©èµ·ãå‹¢',
                excuses: [
                    'å¸ƒå›£ã‹ã‚‰å‡ºãŸç¬é–“ã«ä½“åŠ›ãŒå°½ããŸ',
                    'å¸ƒå›£ã¨ç´„æŸã—ãŸã‹ã‚‰ã€‚ç ´ã‚Œãªã„',
                    'å¯’ã™ãã¦å¸ƒå›£ã‹ã‚‰å‡ºãŸã‚‰æ­»ã¬'
                ]
            },
            D: {
                id: 'D', emoji: 'â°', name: 'æ˜æ—¥ã‚„ã‚‹å‹',
                catch: 'ã€Œæ˜æ—¥ã®è‡ªåˆ†ã€ã‚ˆã‚ã—ãã€',
                compatible: 'E', enemy: 'è¨ˆç”»çš„ãªäºº',
                excuses: [
                    'æ˜æ—¥ã®æœå…¥ã‚Œã°æœã‚¤ãƒã§æ¸…æ½”ã«ãªã‚Œã‚‹',
                    'æ˜æ—¥ã®è‡ªåˆ†ã¯ä»Šæ—¥ã‚ˆã‚Šå„ªç§€ãªã¯ãš',
                    'æ˜æ—¥2å›å…¥ã‚Œã°ãƒãƒ£ãƒ©'
                ]
            },
            E: {
                id: 'E', emoji: 'ğŸ˜´', name: 'çœã‚¨ãƒå‹',
                catch: 'ã€Œæœ€å°é™ã®åŠ´åŠ›ã§ç”ŸããŸã„ã€',
                compatible: 'D', enemy: 'æ„è­˜é«˜ã„ç³»',
                excuses: [
                    'å‹•ãã®ãŒãã‚‚ãã‚‚ç„¡ç†',
                    'çœã‚¨ãƒã¯åœ°çƒã«ã‚„ã•ã—ã„',
                    'ç–²ã‚Œã™ãã¦æµ´å®¤ã§å¯è½ã¡ã—ãã†'
                ]
            },
            F: {
                id: 'F', emoji: 'ğŸ§´', name: 'å®Œç’§ä¸»ç¾©å‹',
                catch: 'ã€Œä¸­é€”åŠç«¯ãŒå«Œã„ã€',
                compatible: 'G', enemy: 'é©å½“ãªäºº',
                excuses: [
                    'å…¥ã‚‹ãªã‚‰2æ™‚é–“ã‚³ãƒ¼ã‚¹ã€‚ãã®æ°—åŠ›ãŒãªã„',
                    'ã‚¹ã‚­ãƒ³ã‚±ã‚¢ã¾ã§ã‚„ã‚‹å…ƒæ°—ãŒãªã„',
                    'å®Œç’§ã«ã§ããªã„ãªã‚‰æ˜æ—¥ã«ã™ã‚‹'
                ]
            },
            G: {
                id: 'G', emoji: 'ğŸ®', name: 'ã‚²ãƒ¼ãƒãƒ¼å‹',
                catch: 'ã€Œã‚ã¨1ã‚¹ãƒ†ãƒ¼ã‚¸ã ã‘ã€',
                compatible: 'F', enemy: 'ã‚²ãƒ¼ãƒ ã—ãªã„äºº',
                excuses: [
                    'ã‚­ãƒªãŒã„ã„ã¨ã“ã‚ãŒæ°¸é ã«æ¥ãªã„',
                    'ãƒãƒƒãƒãƒ³ã‚°å¾…ã¡ã§æŠœã‘ã‚‰ã‚Œãªã„',
                    'ã‚»ãƒ¼ãƒ–ãƒã‚¤ãƒ³ãƒˆã¾ã§ã‚ã¨å°‘ã—ï¼ˆå˜˜ï¼‰'
                ]
            },
            H: {
                id: 'H', emoji: 'â„ï¸', name: 'å­£ç¯€é™å®šå‹',
                catch: 'ã€Œå¯’ã„ã¨å…¨ã¦ãŒç„¡ç†ã€',
                compatible: 'C', enemy: 'å¯’ã•ã«å¼·ã„äºº',
                excuses: [
                    'å†¬ã¯é€±3ã§ã„ã„ã£ã¦èª°ã‹ãŒè¨€ã£ã¦ãŸ',
                    'å¯’ã™ãã¦è„±ãã®ãŒç„¡ç†',
                    'æ˜¥ã«ãªã£ãŸã‚‰æœ¬æ°—å‡ºã™'
                ]
            }
        };

        // è³ªå•ãƒ‡ãƒ¼ã‚¿
        const questions = [
            {
                q: "ãŠé¢¨å‘‚ã«å…¥ã‚ã†ã¨æ€ã£ãŸç¬é–“ã€ã‚¹ãƒãƒ›ã«é€šçŸ¥ãŒæ¥ãŸã€‚ã©ã†ã™ã‚‹ï¼Ÿ",
                options: [
                    { text: "ğŸ“± ã¨ã‚Šã‚ãˆãšè¦‹ã‚‹ã€‚é¢¨å‘‚ã¯å¾Œã§", points: { A: 3 } },
                    { text: "ğŸ”• ç„¡è¦–ã—ã¦é¢¨å‘‚ã¸", points: {} },
                    { text: "ğŸ¤” å†…å®¹ã«ã‚ˆã‚‹", points: { A: 1 } }
                ]
            },
            {
                q: "ã€Œæ˜æ—¥æ—©èµ·ãã—ã¦å…¥ã‚Œã°ã„ã„ã‚„ã€ã¨æ€ã†é »åº¦ã¯ï¼Ÿ",
                options: [
                    { text: "â° ã»ã¼æ¯æ—¥æ€ã£ã¦ã‚‹", points: { D: 3 } },
                    { text: "ğŸ¤” é€±ã«2-3å›", points: { D: 2 } },
                    { text: "ğŸš¿ ã‚ã¾ã‚Šæ€ã‚ãªã„", points: {} }
                ]
            },
            {
                q: "ä¸€ç•ªé¢¨å‘‚ã‚’ã‚µãƒœã‚ŠãŒã¡ãªç†ç”±ã¯ï¼Ÿ",
                options: [
                    { text: "ğŸ“± ã‚¹ãƒãƒ›/SNS/å‹•ç”»", points: { A: 2 } },
                    { text: "ğŸ¤ æ¨ã—æ´»ï¼ˆé…ä¿¡/ãƒ©ã‚¤ãƒ–ãªã©ï¼‰", points: { B: 3 } },
                    { text: "ğŸ›ï¸ å¸ƒå›£ãŒæ°—æŒã¡ã‚ˆã™ãã‚‹", points: { C: 3 } },
                    { text: "ğŸ˜´ å˜ç´”ã«ã‚ã‚“ã©ãã•ã„", points: { E: 3 } },
                    { text: "ğŸ® ã‚²ãƒ¼ãƒ ãŒã‚„ã‚ã‚‰ã‚Œãªã„", points: { G: 3 } }
                ]
            },
            {
                q: "ãŠé¢¨å‘‚ã«å…¥ã‚‹ã¨ãã€ã©ã‚“ãªæ„Ÿã˜ï¼Ÿ",
                options: [
                    { text: "ğŸ§´ å…¥ã‚‹ãªã‚‰é•·é¢¨å‘‚æ´¾ï¼ˆ30åˆ†ä»¥ä¸Šï¼‰", points: { F: 3 } },
                    { text: "âš¡ ã‚µãƒƒã¨æ¸ˆã¾ã›ãŸã„ï¼ˆ10åˆ†ä»¥å†…ï¼‰", points: { E: 1 } },
                    { text: "ğŸ¤· ãã®æ—¥ã«ã‚ˆã‚‹", points: {} }
                ]
            },
            {
                q: "å†¬ã«ãªã‚‹ã¨é¢¨å‘‚ã®ãƒãƒ¼ãƒ‰ãƒ«ã¯...",
                options: [
                    { text: "â„ï¸ ã‚ã¡ã‚ƒãã¡ã‚ƒä¸ŠãŒã‚‹", points: { H: 3, C: 1 } },
                    { text: "ğŸ”¥ ã‚€ã—ã‚æ¸©ã¾ã‚ŠãŸã„", points: {} },
                    { text: "ğŸ¤” ã‚ã¾ã‚Šå¤‰ã‚ã‚‰ãªã„", points: {} }
                ]
            },
            {
                q: "ä»Šã®çŠ¶æ…‹ã«ä¸€ç•ªè¿‘ã„ã®ã¯ï¼Ÿ",
                options: [
                    { text: "ğŸ›ï¸ å¸ƒå›£/ãƒ™ãƒƒãƒ‰ã®ä¸­ã«ã„ã‚‹", points: { C: 2 } },
                    { text: "ğŸ“± ã‚¹ãƒãƒ›è¦‹ãªãŒã‚‰ãƒ€ãƒ©ãƒ€ãƒ©", points: { A: 2 } },
                    { text: "ğŸ¤ æ¨ã—ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ¶ˆåŒ–ä¸­", points: { B: 2 } },
                    { text: "ğŸ® ã‚²ãƒ¼ãƒ /ä½œæ¥­ä¸­", points: { G: 2 } },
                    { text: "ğŸ’¼ ä»•äº‹/å­¦æ ¡ã§ç–²ã‚Œã¦ã‚‹", points: { E: 2 } },
                    { text: "ğŸ§˜ ç‰¹ã«ä½•ã‚‚", points: { D: 1, E: 1 } }
                ]
            }
        ];

        let currentQuestionIndex = 0;
        let scores = { A: 0, B: 0, C: 0, D: 0, E: 0, F: 0, G: 0, H: 0 };

        const tScreen = document.getElementById('top-screen');
        const qScreen = document.getElementById('question-screen');
        const rScreen = document.getElementById('result-screen');
        const qText = document.getElementById('question-text');
        const pBar = document.getElementById('progress-bar');
        const pText = document.getElementById('progress-text');
        const optionsContainer = document.getElementById('options-container');

        function startDiagnosis() {
            tScreen.classList.add('hidden');
            tScreen.classList.remove('flex');
            qScreen.classList.remove('hidden');
            qScreen.classList.add('flex');
            showNextQuestion();
        }

        function showNextQuestion() {
            if (currentQuestionIndex < questions.length) {
                const q = questions[currentQuestionIndex];
                qText.innerText = q.q;

                optionsContainer.innerHTML = '';
                q.options.forEach((opt, index) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn w-full py-3 px-4 bg-white border-2 border-gray-200 text-gray-700 font-bold rounded-xl hover:border-purple-300 hover:bg-purple-50 text-sm text-left leading-snug';
                    btn.innerText = opt.text;
                    btn.onclick = () => answer(opt.points);
                    optionsContainer.appendChild(btn);
                });

                const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
                pBar.style.width = `${progress}%`;
                pText.innerText = `${currentQuestionIndex + 1}/${questions.length}`;

                qScreen.classList.remove('fade-in');
                void qScreen.offsetWidth;
                qScreen.classList.add('fade-in');
            } else {
                showResult();
            }
        }

        function answer(points) {
            for (const [type, score] of Object.entries(points)) {
                scores[type] += score;
            }
            currentQuestionIndex++;
            showNextQuestion();
        }

        function showResult() {
            qScreen.classList.add('hidden');
            qScreen.classList.remove('flex');
            rScreen.classList.remove('hidden');
            rScreen.classList.add('flex');

            // ã‚¹ã‚³ã‚¢åˆè¨ˆã‚’è¨ˆç®—
            const totalScore = Object.values(scores).reduce((a, b) => a + b, 0) || 1;

            // æˆåˆ†%ã‚’è¨ˆç®—ã—ã¦ã‚½ãƒ¼ãƒˆ
            const components = Object.entries(scores)
                .map(([id, score]) => ({
                    id,
                    type: types[id],
                    score,
                    percent: Math.round((score / totalScore) * 100)
                }))
                .sort((a, b) => b.score - a.score);

            // ä¸Šä½3ã¤ã‚’å–å¾—ï¼ˆ0%ã¯é™¤å¤–ï¼‰
            const top3 = components.filter(c => c.percent > 0).slice(0, 3);

            // ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒ—
            const mainType = top3[0]?.type || types.E; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯çœã‚¨ãƒå‹

            document.getElementById('result-emoji').innerText = mainType.emoji;
            document.getElementById('result-type').innerText = `ã€${mainType.name}ã€‘`;
            document.getElementById('result-catch').innerText = mainType.catch;

            // æˆåˆ†ãƒãƒ¼
            const componentList = document.getElementById('component-list');
            componentList.innerHTML = '';

            top3.forEach((comp, index) => {
                const row = document.createElement('div');
                row.innerHTML = `
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-sm">${comp.type.emoji} ${comp.type.name}</span>
                        <span class="text-sm font-black text-purple-500">${comp.percent}%</span>
                    </div>
                    <div class="w-full bg-gray-100 rounded-full h-2 overflow-hidden">
                        <div class="component-bar h-full bg-gradient-to-r from-pink-400 to-purple-400 rounded-full" style="width: 0%"></div>
                    </div>
                `;
                componentList.appendChild(row);

                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                setTimeout(() => {
                    row.querySelector('.component-bar').style.width = `${comp.percent}%`;
                }, 100 + index * 200);
            });

            // ç›¸æ€§
            document.getElementById('compatible-type').innerText = types[mainType.compatible]?.name || '';
            document.getElementById('enemy-type').innerText = mainType.enemy;

            // è¨€ã„è¨³
            const excuse = mainType.excuses[Math.floor(Math.random() * mainType.excuses.length)];
            document.getElementById('excuse-text').innerText = `ã€Œ${excuse}ã€`;

            // ã‚·ã‚§ã‚¢ãƒªãƒ³ã‚¯
            const componentText = top3.map(c => `${c.type.emoji} ${c.type.name} ${c.percent}%`).join('\n');
            const shareText = `ğŸ› ãŠé¢¨å‘‚ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚¿ã‚¤ãƒ—è¨ºæ–­\n\nç§ã¯ã€${mainType.name}ã€‘ã§ã—ãŸï¼\n${mainType.catch}\n\nğŸ§¬ æˆåˆ†\n${componentText}\n\n#ãŠé¢¨å‘‚ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚¿ã‚¤ãƒ—è¨ºæ–­`;
            const shareUrl = 'https://diagnosis.bath-check.com/';
            document.getElementById('share-link').href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`;
        }
    </script>
</body>

</html>